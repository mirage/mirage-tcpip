<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Marshal (tcpip.Udp_packet.Marshal)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tcpip</a> &#x00BB; <a href="../index.html">Udp_packet</a> &#x00BB; Marshal</nav><header class="odoc-preamble"><h1>Module <code><span>Udp_packet.Marshal</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-into_cstruct"><a href="#val-into_cstruct" class="anchor"></a><code><span><span class="keyword">val</span> into_cstruct : 
  <span><span class="label">pseudoheader</span>:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payload</span>:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(unit, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>into_cstruct ~pseudoheader ~payload t buf</code> attempts to assemble a UDP header in <code>buf</code> with <code>t.src_port</code> and <code>t.dst_port</code> set, along with the correct length and checksum. It does not write <code>pseudoheader</code> or <code>payload</code> into the buffer, but requires them to calculate the correct checksum.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cstruct"><a href="#val-make_cstruct" class="anchor"></a><code><span><span class="keyword">val</span> make_cstruct : 
  <span><span class="label">pseudoheader</span>:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payload</span>:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Cstruct</span>.t</span></code></div><div class="spec-doc"><p><code>make_cstruct ~pseudoheader ~payload t</code> allocates, fills, and and returns a buffer representing the UDP header corresponding to <code>t</code>. <code>make_cstruct</code> will allocate 8 bytes for the UDP header. <code>payload</code> and <code>pseudoheader</code> are not directly represented in the output, and are required for correct computation of the UDP checksum only. The checksum will be properly set to reflect the pseudoheader, header, and payload.</p></div></div></div></body></html>
