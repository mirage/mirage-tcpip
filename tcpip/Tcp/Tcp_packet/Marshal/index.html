<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Marshal (tcpip.Tcp.Tcp_packet.Marshal)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tcpip</a> &#x00BB; <a href="../../index.html">Tcp</a> &#x00BB; <a href="../index.html">Tcp_packet</a> &#x00BB; Marshal</nav><header class="odoc-preamble"><h1>Module <code><span>Tcp_packet.Marshal</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-into_cstruct" class="anchored"><a href="#val-into_cstruct" class="anchor"></a><code><span><span class="keyword">val</span> into_cstruct : 
  <span>pseudoheader:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>payload:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>( int, <a href="#type-error">error</a> )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>into_cstruct ~pseudoheader ~payload t buf</code> attempts to write a valid TCP header representing <code>t</code> into <code>buf</code> at offset 0. <code>pseudoheader</code> and <code>payload</code> are required to calculate a correct checksum but are not otherwise reflected in the data written into <code>buf</code> -- <code>buf</code> will contain only a TCP header after a call to <code>into_cstruct</code>. Returns either the number of bytes written into the buffer on success; if the buffer supplied is too small to write the entire header, an error is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_cstruct" class="anchored"><a href="#val-make_cstruct" class="anchor"></a><code><span><span class="keyword">val</span> make_cstruct : 
  <span>pseudoheader:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>payload:<span class="xref-unresolved">Cstruct</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Cstruct</span>.t</span></code></div><div class="spec-doc"><p><code>make_cstruct ~pseudoheader ~payload t</code> allocates, fills, and and returns a buffer representing the TCP header corresponding to <code>t</code>. If <code>t.options</code> is non-empty, <code>t.options</code> will be concatenated onto the result as part of the header. A variable amount of memory (at least 20 bytes, and at most 60) will be allocated, but  is not represented in the output. The checksum will be properly set to reflect the pseudoheader, header, options, and payload.</p></div></div></div></body></html>